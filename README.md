# MShrinker

Утилита для сжатия видеофайлов с копированием метаданных.

## Требования:

В системе должны быть установлены следующие инструменты:

- ExifTool (для копирования метаданных, https://exiftool.org/)
- FFmpeg 4.0+ (для сжатия видео c поддержкой hevc_videotoolbox, https://ffmpeg.org/)
- FFprobe (для получения параметров видео, обычно входит в состав FFmpeg)

Программа проверит наличие этих инструментов в системе.

Поддерживается работа с видеофайлами в форматах: mp4, mov, m4v. На данный момент поддерживается корректная работа только в операционной системе macOS 10.13+ на устройствах Mac с поддержкой аппаратного кодирования HEVC (с процессором Intel и чипом T2 или с процессором Apple Silicon).

## Использование:

- Распакуйте архив с программой.
- Запустите утилиту командой `./mshrinker-[версия] [папка с исходными файлами] [папка для сохранения сжатых файлов]`.

Пример: `./mshrinker-0_2_0-macos-arm64 input_folder /Users/user/output_folder`.

## Проблемы:

### _Программа не запускается. Получаю ошибку «Файл не был открыт»_

<details>
<summary>Как это выглядит</summary>
<img src="/img/1.png" alt="Скриншот ошибки" width="304" height="330">
</details>

#### Решение:

1. Системные настройки -> Конфиденциальность и безопасность -> Листаем вниз, находим пункт вида «Файл [имя_файла] заблокирован для защиты Вашего Мас.» -> Всё равно разрешить
2. Повторно запускаем программу, подтверждаем свои намерения («Всё равно открыть»)

<details>
<summary>Нагляднее</summary>
<img src="/img/1-1.png" alt="Местоположение кнопки разрешения" width="835" height="650">
<img src="/img/1-2.png" alt="Вы уверены?" width="304" height="381">
<img src="/img/1-3.png" alt="Touch ID" width="304" height="343">
</details>
